<template>
    <div class="social-bar">
        <div v-if="link" class="social-bar-message" :class="{ 'social-bar-message-active': message }">Ссылка скопирована
        </div>
        <a v-if="facebook && productUrl" target="_blank" :href="`https://www.facebook.com/sharer/sharer.php?u=${productUrl}&amp;src=sdkpreparse`">
            <svg :width="size" :height="size" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12.4087 0H3.59127C1.60787 0 0 1.60787 0 3.59127V12.4087C0 14.3921 1.60787 16 3.59127 16H12.4087C14.3921 16 16 14.3921 16 12.4087V3.59127C16 1.60787 14.3921 0 12.4087 0Z"
                    fill="#4C76BE" />
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M9.34398 5.14867H10.2584V3.74652C10.1143 3.74652 9.96469 3.71327 9.81506 3.70218H8.98929C8.57354 3.69981 8.16716 3.82559 7.82545 4.06242C7.63622 4.19944 7.47642 4.37306 7.35552 4.57297C7.23462 4.77289 7.15508 4.99504 7.12161 5.22626C7.09035 5.42428 7.07368 5.62433 7.07173 5.8248V6.88334H5.73608V8.44066H7.06618V12.3589H8.69002V8.43512H10.0146L10.2196 6.86671H8.67893V5.7583C8.70664 5.2983 8.9782 5.15975 9.34398 5.14867Z"
                    fill="white" />
            </svg>
        </a>
        <a v-if="whatsapp && productUrl" target="_blank" :href="`https://wa.me/send?text=${productName}&url=${productUrl}`">
            <svg :width="size" :height="size" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12.4087 0H3.59127C1.60787 0 0 1.60787 0 3.59127V12.4087C0 14.3921 1.60787 16 3.59127 16H12.4087C14.3921 16 16 14.3921 16 12.4087V3.59127C16 1.60787 14.3921 0 12.4087 0Z"
                    fill="#189D0E" />
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M3.92932 12.0928L4.05679 11.6107C4.1898 11.1174 4.32835 10.6297 4.45582 10.1365C4.48286 10.0593 4.48286 9.9753 4.45582 9.89816C3.99817 9.04436 3.86115 8.05497 4.06954 7.10893C4.27793 6.16288 4.81797 5.32264 5.592 4.74014C6.36603 4.15764 7.32295 3.87135 8.28971 3.93304C9.25647 3.99473 10.1692 4.40033 10.863 5.07648C11.5567 5.75264 11.9855 6.65471 12.072 7.61957C12.1584 8.58442 11.8968 9.54837 11.3343 10.3371C10.7719 11.1258 9.94573 11.6872 9.00534 11.9198C8.06495 12.1523 7.07237 12.0407 6.20712 11.6051C6.12606 11.5789 6.03878 11.5789 5.95772 11.6051C4.86039 11.849 4.151 12.0485 3.92932 12.0928ZM4.87702 11.1618C5.28159 11.0565 5.65291 10.9622 6.02423 10.8625C6.07046 10.8484 6.1192 10.8446 6.16706 10.8513C6.21492 10.858 6.26074 10.8751 6.30133 10.9013C6.97563 11.3042 7.77078 11.4553 8.54588 11.328C9.25829 11.2159 9.91643 10.8797 10.4248 10.3682C10.9331 9.8566 11.2651 9.19633 11.3726 8.48322C11.4802 7.77011 11.3576 7.04129 11.0228 6.40258C10.6879 5.76386 10.1582 5.24851 9.51049 4.93134C8.86281 4.61417 8.13089 4.5117 7.42101 4.6388C6.71113 4.76591 6.06024 5.11597 5.56285 5.63817C5.06546 6.16037 4.74746 6.82751 4.65503 7.54273C4.56259 8.25795 4.70053 8.98402 5.04882 9.61551C5.11185 9.70882 5.15176 9.81579 5.16525 9.92758C5.17874 10.0394 5.16543 10.1528 5.12641 10.2584C5.02665 10.53 4.98786 10.8348 4.87702 11.1618Z"
                    fill="white" />
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M9.07237 9.9147C8.27985 9.88699 7.01625 9.26073 6.15169 7.75883C5.99483 7.51857 5.92773 7.23069 5.9622 6.94584C5.99667 6.66099 6.13049 6.39742 6.34012 6.2015C6.4137 6.14637 6.49985 6.11041 6.59079 6.09687C6.68173 6.08332 6.77462 6.09262 6.86107 6.12391C6.90541 6.12391 6.94975 6.19596 6.97191 6.24584C7.0883 6.50632 7.19914 6.77234 7.2989 7.03836C7.35432 7.18245 7.25456 7.31546 7.0495 7.54823C7.02143 7.58051 7.00597 7.62184 7.00597 7.66461C7.00597 7.70739 7.02143 7.74872 7.0495 7.781C7.36599 8.33349 7.86309 8.76013 8.45719 8.98917C8.49368 9.00838 8.536 9.01335 8.57594 9.0031C8.61588 8.99286 8.65059 8.96815 8.67333 8.93375C8.99478 8.54026 9.02803 8.42388 9.22754 8.50147C10.0478 8.89496 10.1087 8.91158 10.1143 9.00026C10.1195 9.133 10.095 9.26523 10.0425 9.38729C9.99012 9.50935 9.91111 9.61817 9.81126 9.7058C9.71142 9.79343 9.59327 9.85766 9.46543 9.8938C9.3376 9.92994 9.20331 9.93708 9.07237 9.9147Z"
                    fill="white" />
            </svg>
        </a>
        <a v-if="twitter && productUrl" target="_blank"
            :href="`https://twitter.com/intent/tweet?text=${productName}&url=${productUrl}`">
            <svg :width="size" :height="size" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12.4087 0H3.59127C1.60787 0 0 1.60787 0 3.59127V12.4087C0 14.3921 1.60787 16 3.59127 16H12.4087C14.3921 16 16 14.3921 16 12.4087V3.59127C16 1.60787 14.3921 0 12.4087 0Z"
                    fill="#00C7FF" />
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M6.50643 10.0367C6.12844 10.0273 5.76271 9.90069 5.45987 9.6743C5.15702 9.44791 4.93205 9.13298 4.81609 8.77309C5.07345 8.8301 5.34017 8.8301 5.59753 8.77309C5.35412 8.7159 5.12514 8.6091 4.92488 8.45939C4.72463 8.30968 4.55741 8.12026 4.43369 7.90298C4.2527 7.61239 4.16026 7.27538 4.16767 6.93312C4.4161 7.06987 4.69338 7.14584 4.97681 7.1548C4.59644 6.89303 4.32916 6.49706 4.22863 6.04639C4.127 5.59843 4.20036 5.12857 4.43369 4.73291C4.89021 5.29579 5.45927 5.75711 6.10442 6.08732C6.74956 6.41753 7.45657 6.60934 8.18014 6.65047C8.18014 6.57843 8.18014 6.51746 8.15243 6.45096C8.10258 6.07374 8.17236 5.6904 8.35193 5.35494C8.5315 5.01949 8.8118 4.74883 9.15334 4.58113C9.49488 4.41342 9.88043 4.35711 10.2557 4.42013C10.6309 4.48316 10.9769 4.66234 11.2449 4.93243C11.2566 4.94526 11.2715 4.95464 11.2881 4.95953C11.3047 4.96442 11.3224 4.96463 11.3391 4.96014C11.7108 4.88109 12.068 4.74459 12.3977 4.55556C12.2652 4.96176 11.9972 5.31006 11.6384 5.54206C11.9882 5.50317 12.3302 5.41162 12.6526 5.27049L12.4697 5.54206C12.2775 5.77808 12.0558 5.98854 11.8102 6.16831C11.8011 6.17423 11.7937 6.18249 11.7888 6.19224C11.7839 6.20199 11.7817 6.21286 11.7825 6.22373C11.7931 6.4939 11.782 6.76449 11.7492 7.03288C11.6786 7.59379 11.5197 8.13999 11.2782 8.65117C11.0335 9.18099 10.702 9.66616 10.2972 10.0866C9.62245 10.7905 8.75157 11.2752 7.79773 11.4776C7.46425 11.5501 7.12468 11.5909 6.78353 11.5996C5.75924 11.6346 4.74788 11.3624 3.87948 10.8181L3.83514 10.7904C4.4497 10.8567 5.07106 10.7671 5.64186 10.5299C5.9514 10.4061 6.24233 10.2401 6.50643 10.0367Z"
                    fill="white" />
            </svg>
        </a>
        <a v-if="telegram && productUrl" target="_blank"
            :href="`https://telegram.me/share/url?url=${productUrl}&text=${productName}`">
            <svg :width="size" :height="size" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12.4087 0H3.59127C1.60787 0 0 1.60787 0 3.59127V12.4087C0 14.3921 1.60787 16 3.59127 16H12.4087C14.3921 16 16 14.3921 16 12.4087V3.59127C16 1.60787 14.3921 0 12.4087 0Z"
                    fill="#039BE5" />
                <path
                    d="M6.82304 9.45149L6.64211 11.9992C6.90097 11.9992 7.01308 11.8878 7.14752 11.7542L8.36116 10.593L10.8759 12.4367C11.3371 12.694 11.6621 12.5585 11.7865 12.0119L13.4372 4.26851L13.4376 4.26806C13.5839 3.58551 13.1911 3.3186 12.7417 3.48605L3.03903 7.20492C2.37684 7.46225 2.38686 7.83181 2.92646 7.99925L5.40705 8.77168L11.169 5.1623C11.4401 4.98254 11.6867 5.082 11.4839 5.26176L6.82304 9.45149Z"
                    fill="white" />
            </svg>
        </a>
        <button v-if="link && productUrl" @click="copyLink">
            <svg :width="size - 7" :height="size - 7" viewBox="0 0 22 22" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M17.75 14C17.1836 14.0042 16.6255 14.1365 16.1176 14.3872C15.6098 14.6379 15.1653 15.0004 14.8175 15.4475L7.8575 11.9675C7.94703 11.6526 7.99494 11.3273 8 11C7.99494 10.6727 7.94703 10.3474 7.8575 10.0325L14.8175 6.5525C15.1653 6.99957 15.6098 7.36206 16.1176 7.61276C16.6255 7.86346 17.1836 7.99585 17.75 8C18.4917 8 19.2167 7.78007 19.8334 7.36801C20.4501 6.95596 20.9307 6.37029 21.2145 5.68506C21.4984 4.99984 21.5726 4.24584 21.4279 3.51841C21.2833 2.79098 20.9261 2.1228 20.4016 1.59835C19.8772 1.0739 19.209 0.716751 18.4816 0.572057C17.7542 0.427362 17.0002 0.501625 16.3149 0.785453C15.6297 1.06928 15.044 1.54993 14.632 2.16661C14.2199 2.7833 14 3.50832 14 4.25C14.0051 4.57734 14.053 4.9026 14.1425 5.2175L7.1825 8.6975C6.83475 8.25043 6.39024 7.88794 5.88235 7.63724C5.37446 7.38654 4.81638 7.25415 4.25 7.25C3.25544 7.25 2.30161 7.64509 1.59835 8.34835C0.895088 9.05161 0.5 10.0054 0.5 11C0.5 11.9946 0.895088 12.9484 1.59835 13.6517C2.30161 14.3549 3.25544 14.75 4.25 14.75C4.81638 14.7459 5.37446 14.6135 5.88235 14.3628C6.39024 14.1121 6.83475 13.7496 7.1825 13.3025L14.1425 16.7825C13.9402 17.54 13.9805 18.3419 14.2576 19.0754C14.5347 19.8088 15.0347 20.437 15.6874 20.8715C16.3401 21.306 17.1125 21.525 17.8961 21.4977C18.6797 21.4704 19.435 21.1982 20.0558 20.7193C20.6767 20.2405 21.1318 19.579 21.3572 18.8281C21.5826 18.0771 21.567 17.2744 21.3125 16.5328C21.058 15.7912 20.5775 15.148 19.9384 14.6937C19.2994 14.2393 18.5341 13.9967 17.75 14ZM17.75 2C18.195 2 18.63 2.13196 19 2.3792C19.37 2.62643 19.6584 2.97783 19.8287 3.38896C19.999 3.8001 20.0436 4.2525 19.9568 4.68895C19.87 5.12541 19.6557 5.52632 19.341 5.84099C19.0263 6.15566 18.6254 6.36995 18.189 6.45677C17.7525 6.54359 17.3001 6.49903 16.889 6.32873C16.4778 6.15843 16.1264 5.87005 15.8792 5.50003C15.632 5.13002 15.5 4.69501 15.5 4.25C15.5 3.65326 15.7371 3.08097 16.159 2.65901C16.581 2.23705 17.1533 2 17.75 2ZM4.25 13.25C3.80499 13.25 3.36998 13.118 2.99997 12.8708C2.62996 12.6236 2.34157 12.2722 2.17127 11.861C2.00097 11.4499 1.95642 10.9975 2.04323 10.561C2.13005 10.1246 2.34434 9.72368 2.65901 9.40901C2.97368 9.09434 3.37459 8.88005 3.81105 8.79323C4.2475 8.70642 4.6999 8.75097 5.11104 8.92127C5.52217 9.09157 5.87357 9.37996 6.12081 9.74997C6.36804 10.12 6.5 10.555 6.5 11C6.5 11.5967 6.26295 12.169 5.84099 12.591C5.41903 13.0129 4.84674 13.25 4.25 13.25ZM17.75 20C17.305 20 16.87 19.868 16.5 19.6208C16.13 19.3736 15.8416 19.0222 15.6713 18.611C15.501 18.1999 15.4564 17.7475 15.5432 17.311C15.63 16.8746 15.8443 16.4737 16.159 16.159C16.4737 15.8443 16.8746 15.6301 17.311 15.5432C17.7475 15.4564 18.1999 15.501 18.611 15.6713C19.0222 15.8416 19.3736 16.13 19.6208 16.5C19.868 16.87 20 17.305 20 17.75C20 18.3467 19.7629 18.919 19.341 19.341C18.919 19.7629 18.3467 20 17.75 20Z"
                    fill="#BEBEBE" fill-opacity="0.85" />
            </svg>
        </button>
    </div>
</template>

<script>
export default {
    props: {
        size: {
            type: Number,
            default: 25
        },
        link: {
            type: Boolean,
            default: false
        },
        facebook: {
            type: Boolean,
            default: true
        },
        instagram: {
            type: Boolean,
            default: true
        },
        whatsapp: {
            type: Boolean,
            default: true
        },
        twitter: {
            type: Boolean,
            default: true
        },
        telegram: {
            type: Boolean,
            default: true
        },
        productName: String,
        productSlug: {
            type: String,
            default: null
        }

    },
    data() {
        return {
            message: false,
            pageUrl: null
        }
    },
    methods: {
        copyLink() {
            navigator.clipboard.writeText(this.productUrl);
            this.message = true;
            this.offMessage()
        },
        offMessage() {
            setTimeout(() => {
                this.message = false
            }, 2000);
        }
    },
    computed: {
        productUrl() {
            if(this.productSlug){
                return `${this.pageUrl}product/${this.productSlug}`
            } else {
                return this.pageUrl
            }
        }
    },
    mounted() {
        this.pageUrl = window.location.href
    }
}
</script>

<style lang="scss">
.social-bar {
    position: relative;
    display: flex;
    align-items: center;
    gap: 8px;
    height: 25px;

    .social-bar-message {
        position: absolute;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 180px;
        padding: 5px 10px;
        top: 0;
        transition: 0.3s;
        opacity: 0;
        transform: translateY(0);
        background-color: #ff741f;
        border-radius: 5px;
        font-size: 16px;
        text-align: center;
        color: white;
        font-weight: 600;
    }

    .social-bar-message-active {
        z-index: 10;
        opacity: 1;
        transform: translateY(calc(-100% - 10px));
    }
}
</style>